# EduPlatform 完整開發文件

## 📋 專案概述

**專案名稱**: EduPlatform - 線上教育平台  
**版本**: 1.0  
**最後更新**: 2025-11-25  
**專案類型**: 無伺服器架構 (Serverless) 教育平台

### 核心功能
- ✅ 會員系統 (Email 註冊/登入 + Google OAuth)
- ✅ 內容管理系統 (影片課程管理)
- ✅ 權限控制系統 (免費/付費/VIP 分級)
- ✅ 管理後台 (用戶管理、內容管理、權限管理、統計資訊)
- ✅ 個人化發佈日期控制 (Per-User Release Date)

---

## 🏗️ 技術架構

### 前端技術棧
| 技術 | 用途 | 版本 |
|------|------|------|
| HTML5 | 頁面結構 | - |
| CSS3 | 樣式設計 | - |
| Vanilla JavaScript | 前端邏輯 | ES6+ |
| Google Fonts (Inter) | 字體 | - |
| Google Sign-In SDK | OAuth 登入 | Latest |

### 後端技術棧
| 技術 | 用途 | 限制 |
|------|------|------|
| Google Apps Script | 後端 API | 6 分鐘執行時限 |
| Google Sheets | 資料庫 | 500 萬儲存格上限 |

### 資料表結構
```
1. Users (用戶表)
   - user_id, email, name, password_hash, auth_provider
   - is_paid, is_active, created_at, last_login

2. Content (內容表)
   - content_id, title, url, content_type, description
   - thumbnail, created_at

3. Permissions (權限表)
   - permission_id, user_id, content_id, has_access

4. UserReleaseDate (發佈日期表)
   - id, user_id, content_id, release_date

5. AdminUsers (管理員表)
   - admin_id, email, name, password_hash, created_at
```

---

## 📅 完整開發過程與時程

### 第一階段：需求分析與設計 (1-2 週)
**工作項目**:
- ✅ 需求收集與功能規劃
- ✅ 系統架構設計
- ✅ 資料庫結構設計
- ✅ UI/UX 設計稿
- ✅ 技術選型評估

**交付成果**:
- 需求規格書
- 系統架構圖
- 資料庫 ERD 圖
- UI 設計稿

**所需人力**: 1 名全端工程師 + 1 名 UI/UX 設計師

---

### 第二階段：前端開發 (2-3 週)
**工作項目**:
- ✅ 登入/註冊頁面開發
- ✅ 課程列表頁面開發
- ✅ 影片播放器整合
- ✅ 管理後台介面開發
  - 用戶管理頁面
  - 內容管理頁面
  - 權限管理頁面
  - 統計資訊頁面
- ✅ RWD 響應式設計
- ✅ 表單驗證與錯誤處理

**交付成果**:
- 完整前端頁面 (index.html, admin.html)
- 樣式表 (styles.css, admin.css)
- 前端邏輯 (app.js, admin.js)

**所需人力**: 1-2 名前端工程師

---

### 第三階段：後端開發 (2-3 週)
**工作項目**:
- ✅ Google Sheets 資料庫建立
- ✅ Google Apps Script API 開發
  - 用戶註冊/登入 API
  - Google OAuth 整合
  - 內容管理 API
  - 權限管理 API
  - 管理員 API
- ✅ 密碼加密 (SHA-256)
- ✅ Session Token 機制
- ✅ API 安全性設計

**交付成果**:
- Google Apps Script 程式碼
- API 文件
- 資料庫初始化腳本

**所需人力**: 1 名後端工程師

---

### 第四階段：整合測試 (1-2 週)
**工作項目**:
- ✅ 前後端整合測試
- ✅ 功能測試
- ✅ 跨瀏覽器測試
- ✅ 行動裝置測試
- ✅ 安全性測試
- ✅ 效能測試

**交付成果**:
- 測試報告
- Bug 修復清單

**所需人力**: 1 名 QA 測試工程師

---

### 第五階段：部署與上線 (1 週)
**工作項目**:
- ✅ GitHub Pages 部署
- ✅ Google Apps Script 部署
- ✅ 網域設定 (如需要)
- ✅ SSL 憑證設定
- ✅ 監控系統設定

**交付成果**:
- 正式環境上線
- 部署文件
- 操作手冊

**所需人力**: 1 名 DevOps 工程師

---

### 總開發時程
**最短時程**: 7-9 週 (約 2 個月)  
**建議時程**: 10-12 週 (約 3 個月，包含緩衝時間)

---

## 💰 商業開發成本估算

### 人力成本 (台灣市場參考)

#### 方案一：小型團隊 (最低成本)
| 角色 | 人數 | 時薪 (TWD) | 工時 | 小計 (TWD) |
|------|------|-----------|------|-----------|
| 全端工程師 | 1 | 800-1,200 | 320 小時 | 256,000 - 384,000 |
| UI/UX 設計師 | 1 | 600-1,000 | 80 小時 | 48,000 - 80,000 |
| **總計** | - | - | **400 小時** | **304,000 - 464,000** |

#### 方案二：標準團隊 (建議配置)
| 角色 | 人數 | 時薪 (TWD) | 工時 | 小計 (TWD) |
|------|------|-----------|------|-----------|
| 專案經理 | 1 | 1,000-1,500 | 80 小時 | 80,000 - 120,000 |
| 前端工程師 | 1 | 800-1,200 | 200 小時 | 160,000 - 240,000 |
| 後端工程師 | 1 | 800-1,200 | 160 小時 | 128,000 - 192,000 |
| UI/UX 設計師 | 1 | 600-1,000 | 80 小時 | 48,000 - 80,000 |
| QA 測試工程師 | 1 | 600-900 | 80 小時 | 48,000 - 72,000 |
| **總計** | - | - | **600 小時** | **464,000 - 704,000** |

#### 方案三：完整團隊 (企業級)
| 角色 | 人數 | 時薪 (TWD) | 工時 | 小計 (TWD) |
|------|------|-----------|------|-----------|
| 專案經理 | 1 | 1,200-1,800 | 120 小時 | 144,000 - 216,000 |
| 前端工程師 | 2 | 800-1,200 | 320 小時 | 256,000 - 384,000 |
| 後端工程師 | 1 | 900-1,400 | 200 小時 | 180,000 - 280,000 |
| UI/UX 設計師 | 1 | 700-1,200 | 120 小時 | 84,000 - 144,000 |
| QA 測試工程師 | 1 | 600-1,000 | 120 小時 | 72,000 - 120,000 |
| DevOps 工程師 | 1 | 900-1,400 | 40 小時 | 36,000 - 56,000 |
| **總計** | - | - | **920 小時** | **772,000 - 1,200,000** |

---

### 單人工程師開發方案 (Solo Developer)

> [!NOTE]
> 本節專為**獨立開發者**或**技術創業者**設計，假設開發者具備全端開發能力

#### 所需技能清單

**必備技能** (⭐⭐⭐):
- ✅ HTML5 / CSS3 (RWD 響應式設計)
- ✅ JavaScript (ES6+, DOM 操作, Fetch API)
- ✅ Google Apps Script (類 JavaScript 語法)
- ✅ Google Sheets (資料結構設計)
- ✅ Git / GitHub (版本控制)

**建議技能** (⭐⭐):
- ✅ UI/UX 基礎設計能力
- ✅ 基礎資料庫概念 (CRUD 操作)
- ✅ API 設計原則
- ✅ 前端表單驗證
- ✅ 瀏覽器開發者工具使用

**加分技能** (⭐):
- OAuth 2.0 認證流程
- 密碼加密與安全性
- 效能優化技巧
- 跨瀏覽器相容性處理

---

#### 詳細開發時程表

##### 第一週：環境設定與需求分析 (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 1-2 | 需求整理與功能規劃 | 16h | 16h |
| Day 3 | 技術選型與架構設計 | 8h | 24h |
| Day 4 | 資料庫結構設計 (Google Sheets) | 8h | 32h |
| Day 5 | UI/UX 線框圖設計 | 8h | 40h |

**交付成果**:
- ✅ 功能需求清單
- ✅ 資料庫 ERD 圖
- ✅ 頁面線框圖 (Wireframe)
- ✅ 技術架構文件

---

##### 第二週：前端基礎開發 (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 6-7 | 登入/註冊頁面 HTML + CSS | 16h | 56h |
| Day 8 | 表單驗證與錯誤處理 | 8h | 64h |
| Day 9 | Google OAuth 整合 | 8h | 72h |
| Day 10 | RWD 響應式調整 | 8h | 80h |

**交付成果**:
- ✅ 完整登入/註冊頁面
- ✅ 表單驗證功能
- ✅ Google 一鍵登入按鈕

---

##### 第三週：後端 API 開發 (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 11-12 | Google Sheets 資料表建立 | 8h | 88h |
| Day 13-14 | 用戶註冊/登入 API | 16h | 104h |
| Day 15 | Google OAuth 後端處理 | 8h | 112h |
| Day 16 | Session Token 機制 | 8h | 120h |

**交付成果**:
- ✅ 完整資料表結構
- ✅ 用戶認證 API
- ✅ Token 驗證機制

---

##### 第四週：前端課程頁面 (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 17-18 | 課程列表頁面 UI | 16h | 136h |
| Day 19 | 影片卡片元件設計 | 8h | 144h |
| Day 20 | 影片播放器 Modal | 8h | 152h |
| Day 21 | 權限控制邏輯 (前端) | 8h | 160h |

**交付成果**:
- ✅ 課程列表頁面
- ✅ 影片播放 Modal
- ✅ 鎖定/解鎖狀態顯示

---

##### 第五週：內容管理 API (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 22-23 | 取得課程列表 API | 12h | 172h |
| Day 24 | 權限檢查 API | 12h | 184h |
| Day 25 | 內容 CRUD API | 8h | 192h |
| Day 26 | API 測試與除錯 | 8h | 200h |

**交付成果**:
- ✅ 完整內容管理 API
- ✅ 權限驗證機制
- ✅ API 測試報告

---

##### 第六週：管理後台 - 用戶管理 (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 27-28 | 管理員登入頁面 | 12h | 212h |
| Day 29 | 用戶列表頁面 | 12h | 224h |
| Day 30 | 用戶搜尋與篩選 | 8h | 232h |
| Day 31 | 用戶狀態管理 (啟用/停用) | 8h | 240h |

**交付成果**:
- ✅ 管理員登入功能
- ✅ 用戶管理頁面
- ✅ 用戶狀態切換功能

---

##### 第七週：管理後台 - 內容與權限管理 (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 32-33 | 內容管理頁面 (新增/編輯/刪除) | 16h | 256h |
| Day 34 | 權限管理頁面 | 12h | 268h |
| Day 35-36 | 發佈日期控制功能 | 12h | 280h |

**交付成果**:
- ✅ 完整內容管理功能
- ✅ 權限分配介面
- ✅ 個人化發佈日期設定

---

##### 第八週：管理後台 - 統計與優化 (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 37 | 統計資訊頁面 | 8h | 288h |
| Day 38-39 | 後台 UI/UX 優化 | 16h | 304h |
| Day 40 | 管理後台整合測試 | 8h | 312h |
| Day 41 | 效能優化 (快取、壓縮) | 8h | 320h |

**交付成果**:
- ✅ 統計資訊儀表板
- ✅ 優化後的管理介面
- ✅ 效能優化報告

---

##### 第九週：整合測試與 Bug 修復 (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 42-43 | 前後端整合測試 | 16h | 336h |
| Day 44 | 跨瀏覽器測試 (Chrome/Firefox/Safari) | 8h | 344h |
| Day 45 | 行動裝置測試 (iOS/Android) | 8h | 352h |
| Day 46 | Bug 修復與調整 | 8h | 360h |

**交付成果**:
- ✅ 測試報告
- ✅ Bug 清單與修復記錄
- ✅ 跨平台相容性確認

---

##### 第十週：部署與文件撰寫 (40 小時)

| 日期 | 工作項目 | 時數 | 累計 |
|------|---------|------|------|
| Day 47 | GitHub Pages 部署設定 | 8h | 368h |
| Day 48 | Google Apps Script 部署 | 8h | 376h |
| Day 49 | 使用者操作手冊撰寫 | 12h | 388h |
| Day 50 | 技術文件與 README 撰寫 | 12h | 400h |

**交付成果**:
- ✅ 正式環境上線
- ✅ 使用者手冊
- ✅ 技術文件
- ✅ 部署流程文件

---

#### 總開發時程

| 項目 | 時數 | 工作天 (8h/天) | 自然週 |
|------|------|---------------|--------|
| **總開發時數** | **400 小時** | **50 天** | **10 週** |
| **建議時程 (含緩衝)** | **480 小時** | **60 天** | **12 週** |

> [!IMPORTANT]
> **實際開發時間建議**：
> - **全職開發** (8 小時/天)：10-12 週
> - **兼職開發** (4 小時/天)：20-24 週 (約 5-6 個月)
> - **業餘開發** (2 小時/天)：40-48 週 (約 10-12 個月)

---

#### 成本估算 (單人開發)

##### 方案一：自行開發 (零成本)

**假設**：
- 開發者自行投入時間
- 使用免費工具與服務

| 項目 | 成本 (TWD) |
|------|-----------|
| 開發工具 (VS Code, Git) | **0** (免費) |
| 託管服務 (GitHub Pages) | **0** (免費) |
| 後端服務 (Google Apps Script) | **0** (免費) |
| 資料庫 (Google Sheets) | **0** (免費) |
| 網域 (選配) | 300-500/年 |
| **總計** | **0-500** |

**時間成本**：400-480 小時 (機會成本)

---

##### 方案二：接案開發 (計時收費)

**假設**：
- 獨立接案工程師
- 時薪：NT$ 800-1,200

| 項目 | 時數 | 成本範圍 (TWD) |
|------|------|---------------|
| 開發工時 | 400h | 320,000 - 480,000 |
| 緩衝時間 (20%) | 80h | 64,000 - 96,000 |
| **總計** | **480h** | **384,000 - 576,000** |

**平均成本**：NT$ 480,000

---

##### 方案三：外包開發 (專案計價)

**假設**：
- 委外給獨立開發者
- 專案總價 (含風險溢價)

| 項目 | 成本範圍 (TWD) |
|------|---------------|
| 基礎功能開發 | 300,000 - 400,000 |
| 管理後台開發 | 150,000 - 200,000 |
| 測試與部署 | 50,000 - 80,000 |
| 專案管理費 (15%) | 75,000 - 102,000 |
| **總計** | **575,000 - 782,000** |

**平均成本**：NT$ 678,500

---

#### 成本對照表 (單人 vs 團隊)

| 開發方案 | 時程 | 成本 (TWD) | 優勢 | 劣勢 |
|---------|------|-----------|------|------|
| **單人自行開發** | 10-12 週 | 0-500 | 成本最低、完全掌控 | 時間長、需全端技能 |
| **單人接案** | 10-12 週 | 384,000-576,000 | 成本可控、品質穩定 | 需找到合適人選 |
| **單人外包** | 10-12 週 | 575,000-782,000 | 風險轉移、有保障 | 成本較高 |
| **小型團隊** | 8-10 週 | 304,000-464,000 | 速度快、分工明確 | 需協調溝通 |
| **標準團隊** | 7-9 週 | 464,000-704,000 | 品質高、專業分工 | 成本高 |

---

#### 單人開發建議

##### 適合單人開發的情境

✅ **建議單人開發**：
- 預算有限 (< NT$ 300,000)
- 時間彈性 (可接受 3-6 個月開發期)
- 具備全端開發能力
- 想要完全掌控專案
- 學習導向的專案

❌ **不建議單人開發**：
- 時間緊迫 (< 2 個月)
- 缺乏前端或後端經驗
- 需要複雜的 UI/UX 設計
- 商業專案需快速上線
- 需要專業測試與 QA

---

##### 單人開發成功要訣

1. **時間管理**
   - 每日固定開發時間 (建議 4-8 小時)
   - 使用番茄工作法提升專注力
   - 設定每週里程碑

2. **技能準備**
   - 提前學習 Google Apps Script (1-2 週)
   - 熟悉 Google Sheets API
   - 掌握基礎 OAuth 流程

3. **工具使用**
   - VS Code + Live Server (即時預覽)
   - GitHub Desktop (版本控制)
   - Postman (API 測試)
   - Chrome DevTools (除錯)

4. **避免過度設計**
   - 先完成 MVP (最小可行產品)
   - 避免過早優化
   - 使用現成 UI 框架 (如需要)

5. **尋求協助**
   - 加入開發者社群 (Facebook, Discord)
   - 使用 Stack Overflow 解決問題
   - 參考開源專案

---

#### 單人開發時程規劃建議

##### 全職開發 (8 小時/天)

```
Week 1-2:  需求分析 + 前端基礎
Week 3-4:  後端 API + 前端整合
Week 5-6:  管理後台開發
Week 7-8:  管理後台完善
Week 9:    整合測試
Week 10:   部署與文件

總計: 10 週 (2.5 個月)
```

##### 兼職開發 (4 小時/天)

```
Week 1-4:  需求分析 + 前端基礎
Week 5-8:  後端 API + 前端整合
Week 9-12: 管理後台開發
Week 13-16: 管理後台完善
Week 17-18: 整合測試
Week 19-20: 部署與文件

總計: 20 週 (5 個月)
```

##### 業餘開發 (2 小時/天，週末 4 小時)

```
Month 1-2:  需求分析 + 前端基礎
Month 3-4:  後端 API + 前端整合
Month 5-6:  管理後台開發
Month 7-8:  管理後台完善
Month 9:    整合測試
Month 10:   部署與文件

總計: 10 個月
```

---


### 基礎設施成本 (月費用)

#### 當前架構 (免費方案)
| 項目 | 服務 | 月費用 (TWD) | 限制 |
|------|------|-------------|------|
| 前端託管 | GitHub Pages | **0** | 100GB 流量/月 |
| 後端 API | Google Apps Script | **0** | 每日 20,000 次呼叫 |
| 資料庫 | Google Sheets | **0** | 500 萬儲存格 |
| 網域 | 自訂網域 (選配) | 300-500 | - |
| SSL 憑證 | Let's Encrypt | **0** | - |
| **月總計** | - | **0-500** | - |

> [!IMPORTANT]
> **當前架構完全免費**，僅需支付自訂網域費用 (選配)

---

#### 升級方案一：中小型企業 (100-1,000 用戶)
| 項目 | 服務 | 月費用 (TWD) | 規格 |
|------|------|-------------|------|
| 前端託管 | Vercel Pro | 600 | 無限流量 |
| 後端 API | Google Cloud Run | 1,500-3,000 | 1 vCPU, 512MB RAM |
| 資料庫 | Cloud SQL (MySQL) | 3,000-5,000 | db-f1-micro |
| CDN | Cloudflare Pro | 600 | 全球 CDN |
| 監控 | Google Cloud Monitoring | 500 | 基礎監控 |
| 備份 | 自動備份 | 300 | 每日備份 |
| **月總計** | - | **6,500-10,000** | - |

---

#### 升級方案二：中大型企業 (1,000-10,000 用戶)
| 項目 | 服務 | 月費用 (TWD) | 規格 |
|------|------|-------------|------|
| 前端託管 | Vercel Enterprise | 1,500 | 企業級 SLA |
| 後端 API | Google Cloud Run | 5,000-10,000 | 2 vCPU, 2GB RAM |
| 資料庫 | Cloud SQL (PostgreSQL) | 8,000-15,000 | db-n1-standard-1 |
| Redis 快取 | Cloud Memorystore | 3,000-5,000 | 1GB |
| CDN | Cloudflare Business | 6,000 | 進階 DDoS 防護 |
| 監控與日誌 | Datadog / New Relic | 3,000-5,000 | 完整監控 |
| 備份與災難恢復 | 自動備份 + 異地備援 | 1,500-3,000 | 每小時備份 |
| **月總計** | - | **28,000-45,000** | - |

---

#### 升級方案三：大型企業 (10,000+ 用戶)
| 項目 | 服務 | 月費用 (TWD) | 規格 |
|------|------|-------------|------|
| 前端託管 | AWS CloudFront + S3 | 3,000-6,000 | 全球分發 |
| 後端 API | Kubernetes (GKE) | 15,000-30,000 | 3 節點叢集 |
| 資料庫 | Cloud SQL HA | 20,000-40,000 | 高可用性配置 |
| Redis 快取 | Cloud Memorystore | 8,000-15,000 | 5GB, HA |
| CDN | Cloudflare Enterprise | 15,000+ | 客製化方案 |
| 監控與日誌 | Datadog Enterprise | 10,000-20,000 | 完整可觀測性 |
| 備份與災難恢復 | 企業級方案 | 5,000-10,000 | 即時備份 |
| 安全性 | WAF + DDoS 防護 | 5,000-10,000 | 企業級安全 |
| **月總計** | - | **81,000-146,000** | - |

---

## 📊 流量與同時瀏覽上限分析

### 當前架構限制 (Google Apps Script + Sheets)

#### Google Apps Script 限制
| 項目 | 免費版限制 | 影響 |
|------|-----------|------|
| 每日 API 呼叫次數 | 20,000 次/天 | 約 833 次/小時 |
| 單次執行時間 | 6 分鐘 | 長時間查詢會逾時 |
| 同時執行數 | 30 個 | 高並發時會排隊 |
| 每日執行時間 | 90 分鐘 | 總執行時間限制 |

#### Google Sheets 限制
| 項目 | 限制 | 影響 |
|------|------|------|
| 最大儲存格數 | 500 萬個 | 約可存 50,000 筆用戶資料 |
| 單次讀取速度 | 1-3 秒 | 查詢效能受限 |
| 同時編輯數 | 100 人 | 高並發寫入會失敗 |

---

### 同時在線用戶上限估算

#### 情境一：輕度使用 (瀏覽為主)
```
假設：
- 每位用戶每分鐘發送 2 次 API 請求
- 同時在線用戶數 = X

計算：
- 每小時 API 呼叫 = X × 2 × 60 = 120X
- 限制：120X ≤ 833
- X ≤ 6.9

結論：約 6-7 位同時在線用戶
```

#### 情境二：中度使用 (觀看影片)
```
假設：
- 每位用戶每分鐘發送 1 次 API 請求
- 同時在線用戶數 = X

計算：
- 每小時 API 呼叫 = X × 1 × 60 = 60X
- 限制：60X ≤ 833
- X ≤ 13.8

結論：約 13-14 位同時在線用戶
```

#### 情境三：輕度使用 + 快取優化
```
假設：
- 使用前端快取，減少 50% API 呼叫
- 每位用戶每分鐘發送 1 次 API 請求

計算：
- 每小時 API 呼叫 = X × 1 × 60 = 60X
- 限制：60X ≤ 833
- X ≤ 13.8

結論：約 13-14 位同時在線用戶
```

> [!WARNING]
> **當前架構建議上限**：
> - **同時在線用戶**: 10-15 人
> - **每日活躍用戶 (DAU)**: 100-200 人
> - **總註冊用戶**: 1,000-5,000 人

---

### 升級後的流量承載能力

#### 升級方案一：Cloud SQL + Cloud Run
| 指標 | 能力 |
|------|------|
| 同時在線用戶 | 100-500 人 |
| 每日活躍用戶 (DAU) | 1,000-5,000 人 |
| 總註冊用戶 | 10,000-50,000 人 |
| API 請求/秒 | 50-100 RPS |
| 資料庫連線數 | 100 個 |

#### 升級方案二：Kubernetes + PostgreSQL HA
| 指標 | 能力 |
|------|------|
| 同時在線用戶 | 1,000-5,000 人 |
| 每日活躍用戶 (DAU) | 10,000-50,000 人 |
| 總註冊用戶 | 100,000-500,000 人 |
| API 請求/秒 | 500-1,000 RPS |
| 資料庫連線數 | 500 個 |

#### 升級方案三：微服務架構 + 分散式資料庫
| 指標 | 能力 |
|------|------|
| 同時在線用戶 | 10,000+ 人 |
| 每日活躍用戶 (DAU) | 100,000+ 人 |
| 總註冊用戶 | 1,000,000+ 人 |
| API 請求/秒 | 5,000+ RPS |
| 資料庫連線數 | 2,000+ 個 |

---

## 🚀 資料庫與環境升級條件

### 升級觸發條件

#### 立即升級 (Critical)
以下任一條件滿足時，**必須立即升級**：

1. **效能問題**
   - API 回應時間 > 3 秒
   - 資料庫查詢時間 > 2 秒
   - 頁面載入時間 > 5 秒

2. **容量問題**
   - Google Sheets 儲存格使用率 > 80% (400 萬個)
   - 每日 API 呼叫次數 > 16,000 次 (80% 配額)
   - 註冊用戶數 > 5,000 人

3. **可靠性問題**
   - 每日錯誤率 > 5%
   - 系統可用性 < 95%
   - 頻繁出現執行逾時錯誤

4. **安全性問題**
   - 需要符合 GDPR / 個資法要求
   - 需要資料加密 (at rest)
   - 需要稽核日誌功能

---

### 升級路徑與預算

#### 第一階段升級：Cloud SQL (建議時機：100+ DAU)

**升級項目**:
1. 將 Google Sheets 遷移至 Cloud SQL (MySQL/PostgreSQL)
2. 將 Google Apps Script 遷移至 Cloud Run
3. 實作 Redis 快取層
4. 設定 CDN 加速

**升級成本**:
| 項目 | 一次性成本 (TWD) | 月費用 (TWD) |
|------|-----------------|-------------|
| 資料遷移服務 | 30,000-50,000 | - |
| 程式碼重構 | 80,000-150,000 | - |
| 基礎設施設定 | 20,000-40,000 | - |
| 測試與驗證 | 30,000-50,000 | - |
| 月運營成本 | - | 6,500-10,000 |
| **總計** | **160,000-290,000** | **6,500-10,000** |

**升級時程**: 3-4 週

**效益**:
- 同時在線用戶提升至 100-500 人
- API 回應時間降至 < 500ms
- 99.5% 系統可用性

---

#### 第二階段升級：Kubernetes (建議時機：1,000+ DAU)

**升級項目**:
1. 部署 Kubernetes 叢集 (GKE/EKS)
2. 微服務化架構重構
3. 資料庫升級至高可用性配置
4. 實作自動擴展 (Auto-scaling)
5. 完整監控與告警系統

**升級成本**:
| 項目 | 一次性成本 (TWD) | 月費用 (TWD) |
|------|-----------------|-------------|
| 架構重構 | 200,000-400,000 | - |
| DevOps 自動化 | 100,000-200,000 | - |
| 資料庫升級 | 50,000-100,000 | - |
| 監控系統建置 | 50,000-100,000 | - |
| 測試與驗證 | 80,000-150,000 | - |
| 月運營成本 | - | 28,000-45,000 |
| **總計** | **480,000-950,000** | **28,000-45,000** |

**升級時程**: 6-8 週

**效益**:
- 同時在線用戶提升至 1,000-5,000 人
- API 回應時間降至 < 200ms
- 99.9% 系統可用性
- 自動擴展能力

---

#### 第三階段升級：企業級架構 (建議時機：10,000+ DAU)

**升級項目**:
1. 多區域部署 (Multi-Region)
2. 分散式資料庫 (Sharding)
3. 訊息佇列系統 (Kafka/RabbitMQ)
4. 全文搜尋引擎 (Elasticsearch)
5. 大數據分析平台
6. AI/ML 推薦系統

**升級成本**:
| 項目 | 一次性成本 (TWD) | 月費用 (TWD) |
|------|-----------------|-------------|
| 架構設計諮詢 | 300,000-500,000 | - |
| 系統重構 | 800,000-1,500,000 | - |
| 資料遷移 | 200,000-400,000 | - |
| 測試與驗證 | 200,000-400,000 | - |
| 培訓與文件 | 100,000-200,000 | - |
| 月運營成本 | - | 81,000-146,000 |
| **總計** | **1,600,000-3,000,000** | **81,000-146,000** |

**升級時程**: 3-6 個月

**效益**:
- 同時在線用戶提升至 10,000+ 人
- API 回應時間降至 < 100ms
- 99.99% 系統可用性
- 全球化部署
- 進階功能 (推薦系統、即時分析)

---

## 📈 成本效益分析

### ROI 計算範例

假設：
- 付費用戶比例：10%
- 月費：NT$ 299/人
- 當前用戶數：1,000 人

#### 當前架構 (免費)
```
月收入 = 1,000 × 10% × 299 = NT$ 29,900
月成本 = NT$ 0 (免費方案)
月淨利 = NT$ 29,900
年淨利 = NT$ 358,800
```

#### 升級方案一 (Cloud SQL)
```
月收入 = 5,000 × 10% × 299 = NT$ 149,500
月成本 = NT$ 10,000
月淨利 = NT$ 139,500
年淨利 = NT$ 1,674,000

投資回收期 = 290,000 / 139,500 = 2.1 個月
```

#### 升級方案二 (Kubernetes)
```
月收入 = 20,000 × 10% × 299 = NT$ 598,000
月成本 = NT$ 45,000
月淨利 = NT$ 553,000
年淨利 = NT$ 6,636,000

投資回收期 = 950,000 / 553,000 = 1.7 個月
```

---

## 🎯 升級決策建議

### 決策矩陣

| 用戶規模 | 建議架構 | 預算範圍 (一次性) | 月運營成本 |
|---------|---------|-----------------|-----------|
| < 100 DAU | 當前架構 (免費) | NT$ 0 | NT$ 0-500 |
| 100-1,000 DAU | Cloud SQL + Cloud Run | NT$ 160,000-290,000 | NT$ 6,500-10,000 |
| 1,000-10,000 DAU | Kubernetes + PostgreSQL | NT$ 480,000-950,000 | NT$ 28,000-45,000 |
| 10,000+ DAU | 企業級微服務 | NT$ 1,600,000-3,000,000 | NT$ 81,000-146,000 |

---

## 📝 總結與建議

### 當前狀態評估
✅ **優勢**:
- 完全免費的基礎設施
- 快速開發與部署
- 低維護成本
- 適合 MVP 與早期測試

⚠️ **限制**:
- 同時在線用戶上限：10-15 人
- 每日 API 呼叫限制：20,000 次
- 資料庫容量限制：500 萬儲存格
- 效能與可靠性受限

### 升級時機建議

> [!IMPORTANT]
> **建議升級時機**：
> 1. **立即規劃**：當 DAU 達到 50 人時
> 2. **開始執行**：當 DAU 達到 80 人時
> 3. **完成升級**：當 DAU 達到 100 人前

### 預算準備建議

1. **短期 (3 個月內)**:
   - 預留 NT$ 300,000 作為第一階段升級預算
   - 預留 NT$ 10,000/月 作為運營成本

2. **中期 (6-12 個月)**:
   - 預留 NT$ 1,000,000 作為第二階段升級預算
   - 預留 NT$ 50,000/月 作為運營成本

3. **長期 (1-2 年)**:
   - 預留 NT$ 3,000,000 作為企業級升級預算
   - 預留 NT$ 150,000/月 作為運營成本

---

## 📞 聯絡資訊

如需進一步討論開發需求或升級方案，請聯繫：

**專案負責人**: [您的名字]  
**Email**: [您的 Email]  
**電話**: [您的電話]

---

**文件版本**: 1.0  
**最後更新**: 2025-11-25  
**下次審查**: 2025-12-25
